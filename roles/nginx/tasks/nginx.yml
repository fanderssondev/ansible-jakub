---
# - name: Create logs directories and files
#   ansible.builtin.file:
#     path: "{{ item.path }}"
#     state: "{{ item.state }}"
#     recurse: "{{ item.recurse | default(omit) }}"
#     owner: "{{ item.owner | default('root') }}"
#     group: "{{ item.group | default('root') }}"
#     mode: "{{ item.mode | default('0755') }}"
#     modification_time: "{{ item.modification_time | default(omit) }}"
#     access_time: "{{ item.access_time | default(omit) }}"
#   loop: "{{ nginx_dirs }}"
#   notify:
#     - restart_nginx

# - name: Copy Nginx configuration
#   ansible.builtin.copy:
#     src: "{{ item.src }}"
#     dest: "{{ item.dest }}"
#     owner: "{{ item.owner | default('root') }}"
#     group: "{{ item.group | default('root') }}"
#     mode: "{{ item.mode | default('0644') }}"
#   loop: "{{ nginx_files }}"
#   notify:
#     - restart_nginx

# - name: Add a user to a password file and ensure permissions are set
#   community.general.htpasswd:
#     path: "{{ item.path }}"
#     name: "{{ item.name }}"
#     password: "{{ item.password }}"
#     owner: "{{ item.owner }}"
#     group: "{{ item.group }}"
#     mode: "{{ item.mode | default('0660') }}"
#   loop: "{{ nginx_auth }}"
#   notify:
#     - restart_nginx

# - name: Copy templates
#   ansible.builtin.template:
#     src: "{{ item.src }}"
#     dest: "{{ item.dest }}"
#     owner: "{{ item.owner }}"
#     group: "{{ item.group }}"
#     mode: "{{ item.mode | default('0755') }}"
#   loop: "{{ nginx_websites }}"
#   notify:
#     - restart_nginx

# - name: Generate a Self Signed OpenSSL certificate
#   community.crypto.x509_certificate:
#     path: /etc/ssl/crt/www.domain.org.crt
#     privatekey_path: /etc/ssl/private/www.domain.org.pem
#     csr_path: www.domain.org.csr
#     provider: selfsigned
